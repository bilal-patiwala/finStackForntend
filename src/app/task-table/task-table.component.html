<div class="w-[95%] mx-auto">
  <div class="mt-6 mb-4">
    <p class="text-[18px]">
      Use the
      <span
        ><i class="fas fa-filter" style="font-size: 12px; color: #787b7e"></i>
      </span>
      icon next to the table titles to apply filter
    </p>
  </div>
  <div class="w-100 text-[14px] text-left">
    <div>
      <!-- <h3>{{ groupedTasks[date]?.dateLabel }} - {{ groupedTasks[date]?.open }} Open - {{ groupedTasks[date]?.closed }} Closed</h3> -->
      <table class="w-100">
        <thead>
          <tr>
            <th class="px-3 w-[10%] text-gray-400">
              Date
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[20%] text-left text-gray-400">
              Entity Name
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[10%] text-gray-400">
              Task Type
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[8%] text-gray-400 w-[10%]">
              Time
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[15%] text-gray-400">
              Contact Person
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[30%] text-gray-400">
              Notes
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[15%] text-gray-400">
              Status
              <span
                ><i
                  class="fas fa-filter"
                  style="font-size: 12px; color: #787b7e"
                ></i
              ></span>
            </th>
            <th class="px-3 w-[10%] text-gray-400">Options</th>
          </tr>
        </thead>
        <tbody *ngFor="let key of taskskeys()" class="">
          <tr>
            <td colspan="8" class="px-3">
              <div class="flex items-center gap-4">
                <span class="font-bold">{{ key }}</span>
                <span class="text-gray-400">{{ formatDate(key) }}</span>
                <span class="text-gray-400">{{ totalTaskOpen(key) }} Open</span>
                <hr class="flex-grow border-[1px] border-gray-300" />
              </div>
            </td>
          </tr>
          <tr
            class="text-[16px] capitalize my-3"
            *ngFor="let task of groupedTasks[key]"
          >
            <td class="px-3">{{ task.createdAt }}</td>
            <td class="px-3 text-[blue]">{{ task.entity_name }}</td>
            <td class="px-3">{{ task.task_type }}</td>
            <td class="px-3">{{ task.task_time }}</td>
            <td class="px-3">{{ task.contact_person }}</td>
            <td class="px-3 py-1">
              <ng-container *ngIf="task.notes">
                {{ task.notes }}
              </ng-container>

              <ng-container *ngIf="!task.notes">
                <button class="bg-gray-400 flex items-center gap-2  text-white px-4 py-1 rounded-md">
                    <i class="fas fa-plus" style="font-size: 12px; color: #2196f3;border: 1px solid blue;border-radius: 100%; "></i>
                  <p class="">Add Note</p>
                </button>
              </ng-container>
            </td>
            <td class="px-3">{{ task.status }}</td>
            <td class="px-3">
              <div *ngIf="!editModeTasks[task.id]">
                <button (click)="openOptionsModal(task, $event)">
                  Options
                </button>
                <!-- <mat-dialog #optionsModal>
                  <app-task-options-modal
                    [task]="task"
                  ></app-task-options-modal>
                </mat-dialog> -->
              </div>
              <div *ngIf="editModeTasks[task.id]">
                <button
                  (click)="save(task)"
                  class="bg-blue-500 text-white px-4 py-1 rounded-md mr-2"
                >
                  Save
                </button>
                <button class="bg-red-500 text-white px-4 py-1 rounded-md">
                  Delete
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<!-- <div *ngIf="!groupedTasks || Object.keys(groupedTasks).length === 0">
  <p>No tasks available</p>
</div> -->
